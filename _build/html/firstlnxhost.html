

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding a Linux host &mdash; Check_MK Documentation  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Check_MK Documentation  documentation" href="index.html"/>
        <link rel="next" title="Adding a Windows host" href="firstwinhost.html"/>
        <link rel="prev" title="Contacts" href="contacts.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Check_MK Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is Monitoring all about?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#states">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-a-monitoring-system">What is a monitoring system?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-a-check">What is a check?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#active-vs-passive-checks">Active vs. Passive Checks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cmkarchitecture.html">Check_MK Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#check-mk-components">Check_MK Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#configuration-check-engine">Configuration &amp; Check Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#livestatus">Livestatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#multisite">Multisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#wato">WATO</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#notify">Notify</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#business-intelligence">Business Intelligence</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#mobile">Mobile</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#event-console">Event Console</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Check_MK Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#operating-system">Operating System</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#disk-space">Disk Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#smtp-for-outgoing-emails">SMTP for outgoing emails</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#time-services">Time services</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#repository">Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#downloading-check-mk">Downloading Check_MK</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#confirmation">Confirmation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firstsite.html">Create a Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstsite.html#omd-command">OMD command</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstsite.html#omd-config-command">OMD config command</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstsite.html#creating-the-site">Creating the site</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contacts.html">Contacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contacts.html#roles">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="contacts.html#contact-groups">Contact Groups</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Adding a Linux host</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#agent-bakery">Agent bakery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prebuilt-package">Prebuilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xinetd">Xinetd</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-host-to-omd">Adding host to OMD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firstwinhost.html">Adding a Windows host</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#agent-bakery">Agent bakery</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#prebuilt-package">Prebuilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#windows-installer">Windows installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#adding-host-to-omd">Adding host to OMD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multisite.html">Multisite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#distributed-monitoring">Distributed monitoring</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Check_MK Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Adding a Linux host</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="adding-a-linux-host">
<h1>Adding a Linux host<a class="headerlink" href="#adding-a-linux-host" title="Permalink to this headline">¶</a></h1>
<p>In order to monitor your Linux hosts you must install the check_mk agent and provide a way for the check_mk server to communicate with the agents.</p>
<p>Installation of the check_mk agent can be performed a couple of different ways. Below we cover the most common options:</p>
<ul class="simple">
<li>Use the agent bakery and &#8220;bake&#8221; your own agent</li>
<li>Grab one directly from your existing OMD site(s)</li>
</ul>
<div class="section" id="agent-bakery">
<h2>Agent bakery<a class="headerlink" href="#agent-bakery" title="Permalink to this headline">¶</a></h2>
<p>The agent bakery allows you to use the same powerful rules based engine from WATO to create agents for you monitored servers. From WATO, access the Monitoring Agents section, click on the Rules button and configure your agents accordingly.</p>
<p>Once you have created the rules to your specifications go back to the Monitoring Agents main page and click on the Bake Agents button.</p>
<p>Depending on your rules you will have one or more agents for one or more operating environments (rpm, deb, msi). You can click on the DEB/RPM/MSI link and download your agent.</p>
<p>Copy that agent over to your monitored server(s) and install according to your operating environment requirements.</p>
</div>
<div class="section" id="prebuilt-package">
<h2>Prebuilt package<a class="headerlink" href="#prebuilt-package" title="Permalink to this headline">¶</a></h2>
<p>All OMD site instances have prebuilt agents available in ~share/check_mk/agents. You will find there the MSI, RPM and DEB agent as well as the pure (script) agents (check_mk_agent.linux).</p>
<p>The RPM/DEB packages will place the check_mk_agent script (for linux/unix) environments in its proper place (/usr/bin). If you download the check_mk_agent.(linux|unix|*) script then you must make this file executable (chmod +x) and also place it in its proper place. You may also want to create the MK_LIBDIR (/usr/lib/check_mk_agent) and MK_CONFDIR (/etc/check_mk) for configuration variables or custom/local plugins (more on these later).</p>
<p>These prebuilt agents are also available via the OMD site URL: <a class="reference external" href="http://hostname_or_ip">http://hostname_or_ip</a>/&lt;omd site name&gt;/check_mk/agents/. At this URL you will also find additional plugins as well as the xinetd.conf configuration file.</p>
</div>
<div class="section" id="xinetd">
<h2>Xinetd<a class="headerlink" href="#xinetd" title="Permalink to this headline">¶</a></h2>
<p>The easiest and quickest way to get up and running is to setup xinetd to ease communications between the check_mk server and the agent. In the prebuilt agents directory you also have an xinetd.conf file. Copy this file over to /etc/xinet.d/check_mk and edit accordingly. Usually you want to configure the only_from variable to allow connections only from your monitoring server.</p>
<p>After copying the xinetd configuration file restart the xinetd server and proceed to testing connectivity by telnetting from your monitoring server to your monitoring client on tcp port 6556.</p>
<div class="highlight-python"><div class="highlight"><pre>user@host&gt; telnet xyzhost123 6556
Trying 10.0.21.47...
Connected to xyzhost123.
Escape character is &#39;^]&#39;.
&lt;&lt;&lt;check_mk&gt;&gt;&gt;
Version: 1.1.8
AgentOS: linux
&lt;&lt;&lt;df&gt;&gt;&gt;
/dev/sda1     ext3     1008888    223832    733808      24% /
/dev/sdc1     ext3     1032088    284648    695012      30% /lib/modules
&lt;&lt;&lt;ps&gt;&gt;&gt;
init [3]
/sbin/syslogd
/sbin/klogd -x
/usr/sbin/cron
/sbin/getty 38400 tty2
</pre></div>
</div>
</div>
<div class="section" id="adding-host-to-omd">
<h2>Adding host to OMD<a class="headerlink" href="#adding-host-to-omd" title="Permalink to this headline">¶</a></h2>
<p>After confirming that the agent is accessible you can access WATO, Hosts and click on New host. For our example you can fill out just the hostname and click on Save &amp; go to Services button.</p>
<p>If the hostname is resolvable via DNS you do not need to also specify the IP address however if it is not then the IP address is a required field.</p>
<p>After this step you will be taken to the Services page where you can select and configure the services that check_mk has discovered on your server.</p>
<p>For every service discovered you can choose to:</p>
<img alt="_images/srv-discovery.png" src="_images/srv-discovery.png" />
<ol class="arabic simple">
<li>View and edit parameters</li>
<li>Edit and analyze check parameters</li>
<li>Create a rule to permanently disable discovery of said service</li>
<li>Temporarily ignore the service</li>
</ol>
<ul class="simple">
<li>Additional details can be found at the check_mk site [<a class="reference external" href="https://checkmk.com/cms_agent_linux.html](https://checkmk.com/cms_agent_linux.html">https://checkmk.com/cms_agent_linux.html](https://checkmk.com/cms_agent_linux.html</a>)</li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="firstwinhost.html" class="btn btn-neutral float-right" title="Adding a Windows host">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="contacts.html" class="btn btn-neutral" title="Contacts"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>