

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Create a Site &mdash; Check_MK Documentation  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Check_MK Documentation  documentation" href="index.html"/>
        <link rel="next" title="Contacts" href="contacts.html"/>
        <link rel="prev" title="Check_MK Quickstart" href="quickstart.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Check_MK Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is Monitoring all about?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#states">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-a-monitoring-system">What is a monitoring system?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-a-check">What is a check?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#active-vs-passive-checks">Active vs. Passive Checks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cmkarchitecture.html">Check_MK Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#check-mk-components">Check_MK Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#configuration-check-engine">Configuration &amp; Check Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#livestatus">Livestatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#multisite">Multisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#wato">WATO</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#notify">Notify</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#business-intelligence">Business Intelligence</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#mobile">Mobile</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmkarchitecture.html#event-console">Event Console</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Check_MK Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#operating-system">Operating System</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#disk-space">Disk Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#smtp-for-outgoing-emails">SMTP for outgoing emails</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#time-services">Time services</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#repository">Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#downloading-check-mk">Downloading Check_MK</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#confirmation">Confirmation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Create a Site</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#omd-command">OMD command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#omd-config-command">OMD config command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-the-site">Creating the site</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contacts.html">Contacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contacts.html#roles">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="contacts.html#contact-groups">Contact Groups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firstlnxhost.html">Adding a Linux host</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#agent-bakery">Agent bakery</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#prebuilt-package">Prebuilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#xinetd">Xinetd</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstlnxhost.html#adding-host-to-omd">Adding host to OMD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firstwinhost.html">Adding a Windows host</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#agent-bakery">Agent bakery</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#prebuilt-package">Prebuilt package</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#windows-installer">Windows installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="firstwinhost.html#adding-host-to-omd">Adding host to OMD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multisite.html">Multisite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="multisite.html#distributed-monitoring">Distributed monitoring</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Check_MK Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Create a Site</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="create-a-site">
<h1>Create a Site<a class="headerlink" href="#create-a-site" title="Permalink to this headline">¶</a></h1>
<p>Now that you have set-up your Check_MK server it is time to create a monitoring
site. We last left off by confirming that we have access to the omd command.
In the following steps we will use the omd command to create and manage our
monitoring system.</p>
<div class="section" id="omd-command">
<h2>OMD command<a class="headerlink" href="#omd-command" title="Permalink to this headline">¶</a></h2>
<p>The omd command is used to create, update, delete, configure, start, stop and
provides many other options for your monitoring sistes. omd can be used as the
root user and thus it will have access to all of the monitoring sites or as
the respective user of any one monitoring site in which case it will have
access to only that particular site.</p>
<p>Here is example output from the omd command called as a site user:</p>
<div class="highlight-python"><div class="highlight"><pre>[siteuser@omd ~]$ omd

Usage (called as site user):
omd help                        Show general help
omd version    [SITE]           Show version of OMD
omd versions                    List installed OMD versions
omd sites                       Show list of sites
omd update                      Update site to other version of OMD
omd start      [SERVICE]        Start services of one or all sites
omd stop       [SERVICE]        Stop services of site(s)
omd restart    [SERVICE]        Restart services of site(s)
omd reload     [SERVICE]        Reload services of site(s)
omd status     [SERVICE]        Show status of services of site(s)
omd config     ...              Show and set site configuration parameters
omd diff       ([RELBASE])      Shows differences compared to the original version files
omd umount                      Umount ramdisk volumes of site(s)
omd backup     SITE [-|ARCHIVE_PATH] Create a backup tarball of a site, writing it to a file or stdout

General Options:
-V &lt;version&gt;                    set specific version, useful in combination with update/create
omd COMMAND -h, --help          show available options of COMMAND
</pre></div>
</div>
<p>Here is example out from the omd command called as the root user:</p>
<div class="highlight-python"><div class="highlight"><pre>omd [root@cmk mariusp]# omd
Usage (called as root):

omd help                               Show general help
omd setup                              Prepare operating system for OMD (installs packages)
omd uninstall                          Remove OMD and all sites!
omd setversion VERSION                 Sets the default version of OMD which will be used by new sites
omd version    [SITE]                  Show version of OMD
omd versions                           List installed OMD versions
omd sites                              Show list of sites
omd create     SITE                    Create a new site (-u UID, -g GID)
omd init       SITE                    Populate site directory with default files and enable the site
omd rm         SITE                    Remove a site (and its data)
omd disable    SITE                    Disable a site (stop it, unmount tmpfs, remove Apache hook)
omd enable     SITE                    Enable a site (reenable a formerly disabled site)
omd mv         SITE NEWNAME            Rename a site
omd cp         SITE NEWNAME            Make a copy of a site
omd update     SITE                    Update site to other version of OMD
omd start      [SITE] [SERVICE]        Start services of one or all sites
omd stop       [SITE] [SERVICE]        Stop services of site(s)
omd restart    [SITE] [SERVICE]        Restart services of site(s)
omd reload     [SITE] [SERVICE]        Reload services of site(s)
omd status     [SITE] [SERVICE]        Show status of services of site(s)
omd config     SITE ...                Show and set site configuration parameters
omd diff       SITE ([RELBASE])        Shows differences compared to the original version files
omd su         SITE                    Run a shell as a site-user
omd umount     [SITE]                  Umount ramdisk volumes of site(s)
omd backup     SITE SITE [-|ARCHIVE_PATH] Create a backup tarball of a site, writing it to a file or stdout
omd restore    [SITE] [-|ARCHIVE_PATH] Restores the backup of a site to an existing site or creates a new site

General Options:
-V &lt;version&gt;                    set specific version, useful in combination with update/create
omd COMMAND -h, --help          show available options of COMMAND
</pre></div>
</div>
</div>
<div class="section" id="omd-config-command">
<h2>OMD config command<a class="headerlink" href="#omd-config-command" title="Permalink to this headline">¶</a></h2>
<p>To configure your site as a user you issue the following</p>
<p><tt class="docutils literal"><span class="pre">omd</span> <span class="pre">config</span></tt></p>
<p>To configure your site as the root user you must also specify the site name as
follows</p>
<p><tt class="docutils literal"><span class="pre">omd</span> <span class="pre">config</span> <span class="pre">siteone</span></tt></p>
<p>In either case you will get a graphical interface to aid you in configuration.</p>
<img alt="_images/ev-config1.png" src="_images/ev-config1.png" />
<p>We recommend that for your first site you do not make any modifications since
these options are for advanced usage.</p>
<dl class="docutils">
<dt>Basic</dt>
<dd><ul class="first last simple">
<li>Autostart: Lets you choose if your site is started automatically during reboot of your server</li>
<li>Core: Allows you to use the traditional nagios core or the microcore</li>
<li>Crontab: Disables or enables site specific crontabs at boot time</li>
<li>tmpfs: Disables or enables the use of a ramdisk for temporary files</li>
</ul>
</dd>
<dt>Web GUI</dt>
<dd><ul class="first last simple">
<li>Apache Mode: Lets you choose to run a dedicated apache webserver for this site, or use the system webserver process directly</li>
<li>Apache TCP_ADDR: Lets you choose the ip address of your apache webserver</li>
<li>Apache TCP_PORT: Lets you choose the tcp port apache uses</li>
<li>Default_GUI: Lets you choose other GUIs besides Check_MKs multisite GUI</li>
<li>DOKUWIKI_AUTH: Enables the use of the dokuwiki user database for authentication instead of ~/etc/passwd</li>
<li>MULTISITE_AUTHORISATION: Lets multisite manage the permissions of the addon users</li>
<li>MULTISITE_COOKIE_AUTH: Enable or disable cookie based authentication</li>
<li>NAGIOS_THEME: Switch between installed Nagios themes</li>
</ul>
</dd>
<dt>Addons</dt>
<dd><ul class="first last simple">
<li>MKEVENTD: This option enables mkeventd - the event correlation and classification daemon of Check_MK</li>
<li>MKNOTIFYD: Enables of disables Check_MKs notification spooler</li>
<li>NAGVIS_URLS: Lets you choose which GUI is used when clicking on the NagVis map icons</li>
<li>PNP4NAGIOS: Lets you enable or disable PNP4Nagios, a great addon to store nagios performance data to round robin databases</li>
</ul>
</dd>
<dt>Distributed Monitoring</dt>
<dd><ul class="first last simple">
<li>LIVEPROXYD: This option enables the livestatus proxy daemon</li>
<li>LIVESTATUS_TCP: Make the livestatus proxy daemon listen on a tcp port in addition to the unix socket</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="creating-the-site">
<h2>Creating the site<a class="headerlink" href="#creating-the-site" title="Permalink to this headline">¶</a></h2>
<p>To create a site you just run the following command.</p>
<p><tt class="docutils literal"><span class="pre">omd</span> <span class="pre">create</span> <span class="pre">sitename</span></tt></p>
<p>Replace sitename from the above command with the name of the site you would like
to have, for example prod.</p>
<p>Once your site is created you will be presented  with the following output:</p>
<div class="highlight-python"><div class="highlight"><pre>root@linux# omd create prod
Adding /opt/omd/sites/prod/tmp to /etc/fstab.
Restarting Apache...OK
Creating temporary filesystem /omd/sites/prod/tmp...OK
Created new site prod with version 1.2.6b1.mmk.

  The site can be started with omd start prod.
  The default web UI is available at http://&lt;yourhost&gt;/prod/
  The admin user for the web applications is omdadmin with password omd.
  Please do a su - prod for administration of this site.
</pre></div>
</div>
<p>Take note of the information provided to you. You now have the following:</p>
<ul class="simple">
<li>a local site user named prod (the name of the site)</li>
<li>an admin user for the web applications (named omdadmin with password omd)</li>
<li>the link for your site (<a class="reference external" href="http:/">http:/</a>/&lt;yourhost&gt;/prod)</li>
</ul>
<p>Make sure you change the omdadmin password.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contacts.html" class="btn btn-neutral float-right" title="Contacts">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Check_MK Quickstart"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>